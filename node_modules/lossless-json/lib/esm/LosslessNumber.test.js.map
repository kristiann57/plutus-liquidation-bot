{"version":3,"file":"LosslessNumber.test.js","names":["test","expect","isLosslessNumber","LosslessNumber","toLosslessNumber","n","toBe","value","toThrow","toString","toEqual","undefined","NaN","Infinity","valueOf"],"sources":["../../src/LosslessNumber.test.ts"],"sourcesContent":["import { test, expect } from 'vitest'\nimport { isLosslessNumber, LosslessNumber, toLosslessNumber } from './index'\n\ntest('create a LosslessNumber from string', function () {\n  const n = new LosslessNumber('42')\n  expect(n.isLosslessNumber).toBe(true)\n  expect(n.value).toBe('42')\n})\n\ntest('throw an error when when creating a LosslessNumber from invalid string', function () {\n  // invalid\n  expect(() => new LosslessNumber('a')).toThrow(/Invalid number/)\n  expect(() => new LosslessNumber('22.')).toThrow(/Invalid number/)\n  expect(() => new LosslessNumber('0.2e')).toThrow(/Invalid number/)\n  expect(() => new LosslessNumber('2e3.4')).toThrow(/Invalid number/)\n  expect(() => new LosslessNumber('2.3.4')).toThrow(/Invalid number/)\n  expect(() => new LosslessNumber('+24')).toThrow(/Invalid number/)\n  expect(() => new LosslessNumber('   123')).toThrow(/Invalid number/)\n  expect(() => new LosslessNumber('123   ')).toThrow(/Invalid number/)\n\n  // valid\n  expect(new LosslessNumber('42e+4').toString()).toEqual('42e+4')\n  expect(new LosslessNumber('42E-4').toString()).toEqual('42E-4')\n  expect(new LosslessNumber('-42E-4').toString()).toEqual('-42E-4')\n})\n\ntest('test whether something is a LosslessNumber', function () {\n  const n = new LosslessNumber('42')\n  expect(isLosslessNumber(n)).toBe(true)\n  expect(isLosslessNumber(42)).toBe(false)\n  expect(isLosslessNumber(null)).toBe(false)\n  expect(isLosslessNumber({})).toBe(false)\n  expect(isLosslessNumber([])).toBe(false)\n  expect(isLosslessNumber(undefined)).toBe(false)\n})\n\ntest('create a LosslessNumber from number', function () {\n  expect(toLosslessNumber(42)).toEqual(new LosslessNumber('42'))\n  expect(toLosslessNumber(2.47)).toEqual(new LosslessNumber('2.47'))\n\n  expect(() => toLosslessNumber(2 / 3)).toThrow('Invalid number: contains more than 15 digits')\n  expect(() => toLosslessNumber(NaN)).toThrow('Invalid number: NaN')\n  expect(() => toLosslessNumber(Infinity)).toThrow('Invalid number: Infinity')\n  expect(() => toLosslessNumber(-Infinity)).toThrow('Invalid number: -Infinity')\n})\n\ntest('use LosslessNumber.valueOf()', function () {\n  // safe number\n  expect(new LosslessNumber('23.4').valueOf()).toBe(23.4)\n  expect(new LosslessNumber('23e4').valueOf()).toBe(230000)\n\n  // a decimal losing insignificant digits\n  expect(new LosslessNumber('0.66666666666666666666667').valueOf()).toEqual(0.6666666666666666)\n\n  // a big integer\n  expect(new LosslessNumber('123456789012345678901234').valueOf()).toEqual(\n    123456789012345678901234n\n  )\n\n  // overflow\n  expect(() => new LosslessNumber('2.3e+500').valueOf()).toThrow(\n    \"Cannot safely convert to number: the value '2.3e+500' would overflow and become Infinity\"\n  )\n\n  // underflow\n  expect(() => new LosslessNumber('2.3e-500').valueOf()).toThrow(\n    \"Cannot safely convert to number: the value '2.3e-500' would underflow and become 0\"\n  )\n})\n\ntest('can do operations like add a number and a LosslessNumber', () => {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  expect(new LosslessNumber('3') + 2).toBe(5)\n})\n\ntest('LosslessNumber - toString', function () {\n  expect(new LosslessNumber('23.4').toString()).toBe('23.4')\n})\n"],"mappings":"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"}